import urllib.error as urllib3import base64import pprintimport requestsimport re as regexpimport datetimefrom time import sleep# The GETACCESSTOKEN function requests an access token using the SAS Logon # OAuth API. The response contains a field named access_token that contains # the value of the token that you use for subsequent API requests.def getAccessToken(baseUrl1):    url1 = baseUrl1 + '/SASLogon/oauth/token'    # Replace client-ID and client-secret    # with values appropriate for your environment.     s = "client-ID:client-secret"    # Encode the value of the client ID.    tokenCredentials = base64.b64encode(s.encode('ascii')).decode('ascii')    headers = {"Accept": "application/json",               "Authorization": "Basic " + tokenCredentials,               "Content-Type": "application/x-www-form-urlencoded" }    values = { "grant_type": "password",               "username": userid,               "password": password }    # Convert the values dictionary into a string.    dV = u1.urlencode(values)    dV = dV.encode('ascii')    # Request an access token.    req = urllib2.Request(url1, data=dV, headers=headers)    try:        # Open the response object, and convert it into a JSON object.        responseLogon = urllib2.urlopen(req)        body = responseLogon.read()        responseBodyJson = json.loads(body)        # Extract the access token from the response.        accessToken1 = responseBodyJson['access_token']    except urllib3.URLError as e:        if hasattr(e, 'reason'):            print ('Failed to reach a server.')            print ('Error: ', e.reason)            print (e)        elif hasattr(e, 'code'):            print ('The server could not fulfill the request.')            print ('Error: ', e.reason)    except urllib3.HTTPError as e:        print ('Error: ', e.reason)    return accessToken1;
Example Code 7